<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Public+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-slate-50 group/design-root overflow-x-hidden"
      style='--select-button-svg: url(&apos;data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724px%27 height=%2724px%27 fill=%27rgb(73,115,156)%27 viewBox=%270 0 256 256%27%3e%3cpath d=%27M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z%27%3e%3c/path%3e%3c/svg%3e&apos;); font-family: "Public Sans", "Noto Sans", sans-serif;'
    >
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#e7edf4] px-10 py-3">
          <div class="flex items-center gap-8">
            <div class="flex items-center gap-4 text-[#0d141c]">
              <div class="size-4">
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_6_535)">
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M47.2426 24L24 47.2426L0.757355 24L24 0.757355L47.2426 24ZM12.2426 21H35.7574L24 9.24264L12.2426 21Z"
                      fill="currentColor"
                    ></path>
                  </g>
                  <defs>
                    <clipPath id="clip0_6_535"><rect width="48" height="48" fill="white"></rect></clipPath>
                  </defs>
                </svg>
              </div>
              <h2 class="text-[#0d141c] text-lg font-bold leading-tight tracking-[-0.015em]">Licitáveis</h2>
            </div>
            <div class="flex items-center gap-9">
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="index.html">Início</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="licitacoes.html">Licitações</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Municípios</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Órgãos</a>
              <a class="text-[#0d141c] text-sm font-medium leading-normal" href="#">Tipos</a>
            </div>
          </div>
          <div class="flex flex-1 justify-end gap-8">
            <label class="flex flex-col min-w-40 !h-10 max-w-64">
              <div class="flex w-full flex-1 items-stretch rounded-lg h-full">
                <div
                  class="text-[#49739c] flex border-none bg-[#e7edf4] items-center justify-center pl-4 rounded-l-lg border-r-0"
                  data-icon="MagnifyingGlass"
                  data-size="24px"
                  data-weight="regular"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                    ></path>
                  </svg>
                </div>
                <input
                  placeholder="Search"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border-none bg-[#e7edf4] focus:border-none h-full placeholder:text-[#49739c] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal"
                  value=""
                />
              </div>
            </label>
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB5zEDgZnkHPkTIuqoLxujxBBEBsHYyY07KKkY1yCGFyA2tehPRws8135DYa8HNukfdqUBS6AqfdJVm0CHa8QBBycE7MxgZbEaIAw4myThPa4SM9G0XIU-sVSz-hNRThJmD6gwTEz-YUQaqj_7TXvlyqLCnMZik6c9-QnB-dh5dn_-izxeSMC5YcH8Rc2UZgLeQFD52a7WfX64lx9LDBzTCjqNKAYRFX48s2duKCniB30840XPYNex8d8M3WRo8Rc786oNlFfipB0g");'
            ></div>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="flex flex-wrap justify-between gap-3 p-4">
              <p class="text-[#0d141c] tracking-light text-[32px] font-bold leading-tight min-w-72">Resumo das Licitações</p>
            </div>
            <div class="flex flex-wrap gap-4 p-4" id="summary-cards">
              <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e7edf4]">
                <p class="text-[#0d141c] text-base font-medium leading-normal">Total de Licitações</p>
                <p class="text-[#0d141c] tracking-light text-2xl font-bold leading-tight" id="total-licitacoes">0</p>
              </div>
              <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e7edf4]">
                <p class="text-[#0d141c] text-base font-medium leading-normal">Total de Itens</p>
                <p class="text-[#0d141c] tracking-light text-2xl font-bold leading-tight" id="total-itens">0</p>
              </div>
              <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e7edf4]">
                <p class="text-[#0d141c] text-base font-medium leading-normal">Total de Arquivos</p>
                <p class="text-[#0d141c] tracking-light text-2xl font-bold leading-tight" id="total-arquivos">0</p>
              </div>
              <div class="flex min-w-[158px] flex-1 flex-col gap-2 rounded-lg p-6 bg-[#e7edf4]">
                <p class="text-[#0d141c] text-base font-medium leading-normal">Total de Resultados</p>
                <p class="text-[#0d141c] tracking-light text-2xl font-bold leading-tight" id="total-resultados">0</p>
              </div>
            </div>
            <h2 class="text-[#0d141c] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Busca Rápida</h2>
            <div class="px-4 py-3">
              <label class="flex flex-col min-w-40 h-12 w-full">
                <div class="flex w-full flex-1 items-stretch rounded-lg h-full">
                  <div
                    class="text-[#49739c] flex border-none bg-[#e7edf4] items-center justify-center pl-4 rounded-l-lg border-r-0"
                    data-icon="MagnifyingGlass"
                    data-size="24px"
                    data-weight="regular"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path
                        d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                      ></path>
                    </svg>
                  </div>
                  <input
                    placeholder="Buscar por licitação..."
                    class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border-none bg-[#e7edf4] focus:border-none h-full placeholder:text-[#49739c] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal"
                    id="search-input"
                    value=""
                  />
                </div>
              </label>
            </div>
            <h2 class="text-[#0d141c] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Filtros</h2>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#0d141c] text-base font-medium leading-normal pb-2">Município</p>
                <select
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border border-[#cedbe8] bg-slate-50 focus:border-[#cedbe8] h-14 bg-[image:--select-button-svg] placeholder:text-[#49739c] p-[15px] text-base font-normal leading-normal"
                  id="filter-municipio"
                >
                  <option value="">Selecione o município</option>
                </select>
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#0d141c] text-base font-medium leading-normal pb-2">Órgão</p>
                <select
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border border-[#cedbe8] bg-slate-50 focus:border-[#cedbe8] h-14 bg-[image:--select-button-svg] placeholder:text-[#49739c] p-[15px] text-base font-normal leading-normal"
                  id="filter-orgao"
                >
                  <option value="">Selecione o órgão</option>
                </select>
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#0d141c] text-base font-medium leading-normal pb-2">Tipo de Licitação</p>
                <select
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border border-[#cedbe8] bg-slate-50 focus:border-[#cedbe8] h-14 bg-[image:--select-button-svg] placeholder:text-[#49739c] p-[15px] text-base font-normal leading-normal"
                  id="filter-tipo"
                >
                  <option value="">Selecione o tipo</option>
                </select>
              </label>
            </div>
            <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#0d141c] text-base font-medium leading-normal pb-2">Data de Início</p>
                <input
                  placeholder="DD/MM/AAAA"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border border-[#cedbe8] bg-slate-50 focus:border-[#cedbe8] h-14 placeholder:text-[#49739c] p-[15px] text-base font-normal leading-normal"
                  id="filter-data-inicio"
                  type="date"
                />
              </label>
              <label class="flex flex-col min-w-40 flex-1">
                <p class="text-[#0d141c] text-base font-medium leading-normal pb-2">Data de Término</p>
                <input
                  placeholder="DD/MM/AAAA"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#0d141c] focus:outline-0 focus:ring-0 border border-[#cedbe8] bg-slate-50 focus:border-[#cedbe8] h-14 placeholder:text-[#49739c] p-[15px] text-base font-normal leading-normal"
                  id="filter-data-fim"
                  type="date"
                />
              </label>
            </div>
            <div class="flex px-4 py-3 justify-end">
              <button
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-[#0c7ff2] text-slate-50 text-sm font-bold leading-normal tracking-[0.015em]"
                id="apply-filters-btn"
              >
                <span class="truncate">Aplicar Filtros</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      async function fetchSummary() {
        const response = await fetch("http://localhost:8000/licitacoes");
        const licitacoes = await response.json();
        document.getElementById("total-licitacoes").textContent = licitacoes.length;

        let totalItens = 0;
        let totalArquivos = 0;
        let totalResultados = 0;
        for (const lic of licitacoes) {
          // For simplicity, count items and arquivos per licitacao could be fetched separately if needed
          // Here we just increment dummy values or could fetch counts from backend if implemented
          totalItens += 0;
          totalArquivos += 0;
          totalResultados += lic.tem_resultado ? 1 : 0;
        }
        document.getElementById("total-itens").textContent = totalItens;
        document.getElementById("total-arquivos").textContent = totalArquivos;
        document.getElementById("total-resultados").textContent = totalResultados;
      }

      async function fetchFilterOptions() {
        // Fetch distinct municipios, orgaos, tipos from backend or derive from licitacoes
        const response = await fetch("http://localhost:8000/licitacoes");
        const licitacoes = await response.json();

        const municipios = [...new Set(licitacoes.map(l => l.municipio_nome).filter(Boolean))].sort();
        const orgaos = [...new Set(licitacoes.map(l => l.orgao_nome).filter(Boolean))].sort();
        const tipos = [...new Set(licitacoes.map(l => l.modalidade_licitacao_nome).filter(Boolean))].sort();

        const municipioSelect = document.getElementById("filter-municipio");
        municipios.forEach(m => {
          const option = document.createElement("option");
          option.value = m;
          option.textContent = m;
          municipioSelect.appendChild(option);
        });

        const orgaoSelect = document.getElementById("filter-orgao");
        orgaos.forEach(o => {
          const option = document.createElement("option");
          option.value = o;
          option.textContent = o;
          orgaoSelect.appendChild(option);
        });

        const tipoSelect = document.getElementById("filter-tipo");
        tipos.forEach(t => {
          const option = document.createElement("option");
          option.value = t;
          option.textContent = t;
          tipoSelect.appendChild(option);
        });
      }

      function applyFilters() {
        const municipio = document.getElementById("filter-municipio").value;
        const orgao = document.getElementById("filter-orgao").value;
        const tipo = document.getElementById("filter-tipo").value;
        const dataInicio = document.getElementById("filter-data-inicio").value;
        const dataFim = document.getElementById("filter-data-fim").value;

        const params = new URLSearchParams();
        if (municipio) params.append("municipio", municipio);
        if (orgao) params.append("orgao", orgao);
        if (tipo) params.append("tipo", tipo);
        if (dataInicio) params.append("data_inicio", dataInicio);
        if (dataFim) params.append("data_fim", dataFim);

        window.location.href = "licitacoes.html?" + params.toString();
      }

      document.getElementById("apply-filters-btn").addEventListener("click", applyFilters);

      // Initialize page
      fetchSummary();
      fetchFilterOptions();
    </script>
  </body>
</html>
    <script>
      function applyFilters() {
        const municipio = document.querySelector('select[placeholder="Selecione o município"], select').value;
        const orgao = document.querySelectorAll('select')[1].value;
        const tipo = document.querySelectorAll('select')[2].value;
        const dataInicio = document.querySelector('input[placeholder="DD/MM/AAAA"]').value;
        const dataFim = document.querySelectorAll('input[placeholder="DD/MM/AAAA"]')[1].value;

        const params = new URLSearchParams();
        if (municipio && municipio !== "one") params.append("municipio", municipio);
        if (orgao && orgao !== "one") params.append("orgao", orgao);
        if (tipo && tipo !== "one") params.append("tipo", tipo);
        if (dataInicio) params.append("dataInicio", dataInicio);
        if (dataFim) params.append("dataFim", dataFim);

        window.location.href = "licitacoes.html?" + params.toString();
      }
    </script>
  </body>
</html>
